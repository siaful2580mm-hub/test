{% extends "layout.html" %}

{% block content %}

<!-- Header Section (Updated) -->
<div class="bg-white rounded-3xl p-6 shadow-sm mb-6 border border-gray-50 flex items-center justify-between">
    <div class="flex items-center gap-4">
        <div class="h-12 w-12 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center text-xl shadow-sm">
            <i class="fa-solid fa-list-check"></i>
        </div>
        <div>
            <h2 class="text-xl font-bold text-[#0A2540]">আপনার কাজসমূহ</h2>
            <p class="text-xs text-gray-500 mt-1">কাজ শেষ করে আয় করুন</p>
        </div>
    </div>
    <div class="bg-blue-600 text-white px-4 py-1.5 rounded-full text-xs font-bold shadow-md shadow-blue-200 flex items-center gap-2">
        <span>{{ tasks|length }}</span> <span class="hidden md:inline">টি কাজ বাকি</span>
    </div>
</div>

<!-- Task List -->
<div class="space-y-5">
    {% for task in tasks %}
    <div class="bg-white p-5 rounded-3xl shadow-sm border border-gray-50 flex flex-col md:flex-row md:items-center justify-between gap-5 transition hover:shadow-lg relative overflow-hidden group">
        
        <!-- Hover Effect Line -->
        <div class="absolute left-0 top-0 bottom-0 w-1.5 bg-gray-100 group-hover:bg-[#E2136E] transition-colors duration-300"></div>

        <div class="flex items-start gap-4 pl-3">
            <!-- Icon based on category (FontAwesome) -->
            <div class="h-14 w-14 rounded-2xl flex items-center justify-center text-2xl shadow-sm flex-shrink-0 transition-transform group-hover:scale-105
                {% if 'YouTube' in task.category %} bg-red-50 text-red-600 
                {% elif 'Facebook' in task.category %} bg-blue-50 text-blue-600 
                {% elif 'TikTok' in task.category %} bg-black text-white
                {% else %} bg-gray-50 text-gray-600 {% endif %}">
                
                {% if 'YouTube' in task.category %} <i class="fa-brands fa-youtube"></i>
                {% elif 'Facebook' in task.category %} <i class="fa-brands fa-facebook"></i>
                {% elif 'TikTok' in task.category %} <i class="fa-brands fa-tiktok"></i>
                {% else %} <i class="fa-solid fa-globe"></i> {% endif %}
            </div>
            
            <div>
                <h3 class="font-bold text-[#0A2540] text-lg leading-tight">{{ task.title }}</h3>
                <p class="text-sm text-gray-500 mt-1 line-clamp-1">{{ task.description }}</p>
                
                <!-- Badge & Reward -->
                <div class="flex items-center gap-3 mt-3">
                    <span class="text-xs font-bold bg-green-50 text-green-700 px-3 py-1 rounded-full border border-green-100 flex items-center gap-1">
                        <i class="fa-solid fa-coins"></i> ৳ {{ task.reward }}
                    </span>
                    {% if task.task_type == 'screenshot' %}
                    <span class="text-[10px] font-bold bg-purple-50 text-purple-600 px-3 py-1 rounded-full border border-purple-100 flex items-center gap-1">
                        <i class="fa-solid fa-camera"></i> Proof Required
                    </span>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Action Button Logic -->
        <div class="md:self-center pl-3 md:pl-0 w-full md:w-auto">
            {% if task.task_type == 'screenshot' %}
                <!-- ১. স্ক্রিনশট টাস্ক -->
                <a href="/task/submit/{{ task.id }}" class="flex items-center justify-center gap-2 w-full md:w-auto text-center bg-[#0A2540] text-white px-8 py-3 rounded-xl text-sm font-bold shadow-lg shadow-gray-200 hover:bg-opacity-90 active:scale-95 transition">
                    <span>কাজ শুরু করুন</span>
                    <i class="fa-solid fa-arrow-right"></i>
                </a>
            {% else %}
                <!-- ২. সাধারণ লিংক টাস্ক -->
                <a href="{{ task.link }}" target="_blank" class="flex items-center justify-center gap-2 w-full md:w-auto text-center bg-[#0057FF] text-white px-8 py-3 rounded-xl text-sm font-bold shadow-lg shadow-blue-200 hover:bg-blue-600 active:scale-95 transition">
                    <span>ভিজিট করুন</span>
                    <i class="fa-solid fa-arrow-up-right-from-square"></i>
                </a>
            {% endif %}
        </div>

    </div>
    {% else %}
    <!-- Empty State (Modern) -->
    <div class="text-center py-20 bg-white rounded-3xl border border-dashed border-gray-200 shadow-sm">
        <div class="h-20 w-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl text-gray-300">
            <i class="fa-solid fa-box-open"></i>
        </div>
        <h3 class="text-lg font-bold text-gray-700">কোনো কাজ নেই</h3>
        <p class="text-gray-400 text-sm mt-1">নতুন কাজের জন্য অপেক্ষা করুন।</p>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% extends "layout.html" %}

{% block content %}
<div class="bg-white rounded-xl shadow-sm p-5 mb-6 border-b border-gray-200 flex justify-between items-center">
    <h2 class="text-xl font-bold text-[#0A2540]">‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á‡¶ï‡¶∞‡¶£ (Pending Approvals)</h2>
    <a href="/admin" class="text-sm text-gray-500 hover:text-blue-600">Back to Admin</a>
</div>

<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
    {% for sub in submissions %}
    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden flex flex-col">
        
        <!-- 1. Screenshot Preview -->
        <div class="h-48 bg-gray-100 relative group overflow-hidden">
            <img src="{{ sub.proof_link }}" alt="Proof" class="w-full h-full object-cover transition transform group-hover:scale-110">
            <!-- Full View Link -->
            <a href="{{ sub.proof_link }}" target="_blank" class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition text-white font-bold">
                üëÅÔ∏è ‡¶¨‡ßú ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
            </a>
        </div>

        <!-- 2. Details -->
        <div class="p-5 flex-grow">
            <div class="flex justify-between items-start mb-2">
                <div>
                    <h3 class="font-bold text-[#0A2540] text-sm">{{ sub.task_title }}</h3>
                    <p class="text-xs text-gray-500">{{ sub.user_email }}</p>
                </div>
                <span class="bg-blue-50 text-[#0057FF] text-xs font-bold px-2 py-1 rounded">
                    ‡ß≥ {{ sub.reward }}
                </span>
            </div>
            <p class="text-xs text-gray-400">Submitted: {{ sub.created_at[:10] }}</p>
        </div>

        <!-- 3. Actions -->
        <div class="p-4 bg-gray-50 border-t flex gap-3">
            <a href="/admin/submission/reject/{{ sub.id }}" onclick="return confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?')" 
               class="flex-1 bg-white border border-red-200 text-red-600 py-2 rounded-lg text-sm font-bold text-center hover:bg-red-50 transition">
               ‚ùå ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü
            </a>
            <a href="/admin/submission/approve/{{ sub.id }}" onclick="return confirm('‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá‡•§ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§?')" 
               class="flex-1 bg-[#0057FF] text-white py-2 rounded-lg text-sm font-bold text-center hover:bg-blue-700 transition shadow-md">
               ‚úÖ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠
            </a>
        </div>

    </div>
    {% else %}
    <div class="col-span-full text-center py-12">
        <div class="text-4xl mb-3">‚úÖ</div>
        <p class="text-gray-500">‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶∂‡¶® ‡¶®‡ßá‡¶á‡•§ ‡¶∏‡¶¨ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞!</p>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% extends "layout.html" %}

{% block content %}
<div class="bg-white rounded-xl shadow-sm p-5 mb-6 border-b border-gray-200 flex justify-between items-center">
    <h2 class="text-xl font-bold text-[#0A2540]">পেমেন্ট যাচাইকরণ (Activations)</h2>
    <a href="/admin" class="text-sm text-gray-500 hover:text-blue-600">Back to Admin</a>
</div>

<div class="grid gap-4 md:grid-cols-2">
    {% for req in requests %}
    <div class="bg-white rounded-2xl shadow-md border border-gray-100 p-5 relative overflow-hidden">
        
        <!-- Status Badge -->
        <div class="absolute top-4 right-4 bg-yellow-100 text-yellow-700 text-xs font-bold px-2 py-1 rounded">
            Pending
        </div>

        <!-- User Info -->
        <div class="mb-4">
            <h3 class="font-bold text-[#0A2540]">{{ req.user_email }}</h3>
            <p class="text-xs text-gray-500">Submitted: {{ req.created_at[:10] }}</p>
        </div>

        <!-- Payment Details Box -->
        <div class="bg-gray-50 rounded-xl p-3 mb-4 space-y-2 text-sm">
            <div class="flex justify-between">
                <span class="text-gray-500">Method:</span>
                <span class="font-bold text-[#E2136E]">{{ req.method }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-500">Sender:</span>
                <span class="font-mono font-bold">{{ req.sender_number }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-500">TrxID:</span>
                <span class="font-mono font-bold text-blue-600 bg-blue-100 px-1 rounded">{{ req.trx_id }}</span>
            </div>
        </div>

        <!-- Actions -->
        <div class="flex gap-3">
            <a href="/admin/activation/reject/{{ req.id }}" onclick="return confirm('বাতিল করবেন?')" 
               class="flex-1 bg-white border border-red-200 text-red-600 py-2 rounded-lg text-sm font-bold text-center hover:bg-red-50">
               ❌ বাতিল
            </a>
            <a href="/admin/activation/approve/{{ req.id }}" onclick="return confirm('টাকা পেয়েছেন? একাউন্ট চালু হবে।')" 
               class="flex-1 bg-[#0A2540] text-white py-2 rounded-lg text-sm font-bold text-center hover:bg-opacity-90 shadow-md">
               ✅ একাউন্ট চালু করুন
            </a>
        </div>

    </div>
    {% else %}
    <div class="col-span-full text-center py-12 bg-white rounded-xl border border-dashed">
        <div class="text-4xl mb-3">✨</div>
        <p class="text-gray-500">কোনো পেমেন্ট রিকোয়েস্ট পেন্ডিং নেই।</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
